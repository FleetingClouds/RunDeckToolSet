- id: net.fleetingclouds.initial.basicConf
  project: PrepareGenericVPS
  loglevel: INFO
  sequence:
    keepgoing: false
    strategy: node-first
    commands:
    - jobref:
        group: net/fleetingclouds/initial
        name: PushOverSomeInitializationScripts
        args: -Host ${option.Host}
    - exec: echo "We will use aptitude rather than apt-get .................."
    - exec: sudo apt-get -y update
    - exec: echo "Updated  .................................................."
    - exec: sudo apt-get -y upgrade
    - exec: echo "Upgraded  .................................................."
    - exec: sudo apt-get -y install aptitude
    - exec: echo "Switching to aptitude  .................................................."
    - exec: sudo aptitude install nano
    - exec: echo "Installed nano .................................................."
    - exec: sudo aptitude -y purge apache2.2-common
    - exec: echo "Purge Apache  .................................................."
    - exec: echo "................................................................."
    - exec: sudo aptitude -y purge apache2.2-bin
    - exec: sudo aptitude -y purge apache2-utils
    - exec: sudo aptitude -y purge apache2-doc
    - exec: echo "Finished  .................................................."
    - exec: sudo aptitude -y install expect
    - exec: echo "Installed expect .................................................."
    - exec: echo "......................Finished..................................."
  description: 'Steps Three & Four: This script does the basic initial configurations
    required by all Fleeting Clouds hosts'
  name: BasicGeneralInitialConfigurations
  uuid: net.fleetingclouds.initial.basicConf
  nodefilters:
    dispatch:
      threadcount: 1
      keepgoing: false
      excludePrecedence: true
      rankOrder: ascending
    include:
      name: gate.*
  group: net/fleetingclouds/initial
  options:
    Host:
      required: true
      description: the host where the file should go
      value: www.fleetingclouds.net
    sudoPwdRunDeck:
      required: true
      description: The password the script must use for sudo steps.
      value: okmmpl,,
      secure: true
