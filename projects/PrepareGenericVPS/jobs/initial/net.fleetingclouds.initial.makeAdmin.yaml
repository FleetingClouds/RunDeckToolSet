- id: net.fleetingclouds.initial.makeAdmin
  project: PrepareGenericVPS
  loglevel: INFO
  sequence:
    keepgoing: false
    strategy: node-first
    commands:
    - exec: echo scp  ${RUNDECK_PROJECTS}/${RD_JOB_PROJECT}/scripts/initializeForAdminUser.sh    root@${RD_OPTION_HOST}:.
    - exec: scp  ${RUNDECK_PROJECTS}/${RD_JOB_PROJECT}/scripts/initializeForAdminUser.sh    root@${RD_OPTION_HOST}:.
    - exec: echo  .............................................................
    - script: |-
        # 
        export COMMAND="spawn ssh root@$RD_OPTION_HOST ; set timeout 60 ; expect "root@meta:" ; sleep 10 ; send \"bash initializeForAdminUser.sh\n\" ; expect \"Finished  ...\" ; sleep 5 ; send \"exit\n\" ; interact" 
        # 
        echo Execute this $COMMAND 
        # 
        eval expect -c "'$COMMAND'" 
        #
    - exec: echo  .............................................................
  description: 'In a vacant machine this script will create an administrative user
    with the indicated user name.  '
  name: Create Admin user
  uuid: net.fleetingclouds.initial.makeAdmin
  group: net/fleetingclouds/initial
  options:
    Host:
      required: true
      description: This is a host that RunDeck will be accessing in the future.
      value: www.fleetingclouds.net
