- id: net.fleetingclouds.install.joomla.akeeba.restore
  project: PrepareGenericVPS
  loglevel: INFO
  sequence:
    keepgoing: false
    strategy: node-first
    commands:
    - exec: echo " Start - - - "
    - exec: sudo wget -nc -c --user='${option.RemoteSiteFtpUser}' --password='${option.RemoteSiteFtpPassword}' -P ${option.TargetDirectory} ${option.RepositoryURL}/${option.Filename}  2> /dev/null
    - exec: sudo chown httpd:httpd ${option.TargetDirectory}/${option.Filename}
    - exec: echo " - - - End."
  description: This job simply obtains a Joomla site backup, previously created by Akeeba Backup and makes it ready for restoring by Akeeba Kickstart.
  name: GetBackupToRestore
  uuid: net.fleetingclouds.install.joomla.akeeba.restore
  nodefilters:
    dispatch:
      threadcount: 1
      keepgoing: false
      excludePrecedence: true
      rankOrder: ascending
    include:
      name: mol.*
  group: net/fleetingclouds/install/joomla/akeeba
  options:
    Filename:
      required: true
      description: The compressed file.
      value: site-matrixoflife.org-20120619-002108.jpa
    RemoteSiteFtpPassword:
      required: true
      description: Since the file is obtained by ftp a user name and password are required.
    RemoteSiteFtpUser:
      required: true
      description: Since the file is obtained by ftp a user name and password are required.
      value: matrixoflife
    RepositoryURL:
      required: true
      description: the place to get it from
      value: ftp://matrixoflife.org/administrator/components/com_akeeba/backup/
    TargetDirectory:
      required: true
      description: 'The directory where the file should be deposited:  Root directory
        of Joomla!'
      value: /usr/local/apache/htdocs
    sudoPwdRunDeck:
      required: true
      description: RunDeck's password
      value: okmmpl,,
      secure: true
